{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\coope\\\\OneDrive\\\\Desktop\\\\fullstackopen\\\\part2\\\\phonebook\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport personService from './services/persons';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [persons, setPersons] = useState([]);\n  const [newPerson, setNewPerson] = useState({\n    name: \"\",\n    number: \"\"\n  });\n  const [filteredSearch, setFilteredSearch] = useState('');\n  const [personsToShow, setPersonsToShow] = useState([]);\n  const [message, setMessage] = useState(null);\n  useEffect(() => {\n    personService.getAll().then(initialPersons => {\n      setPersons(initialPersons);\n      setPersonsToShow(initialPersons);\n    });\n  }, []);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [message]);\n  const handleFilteredSearch = e => {\n    //console.log(e.target.value)\n    const search = e.target.value;\n    setFilteredSearch(search);\n    setPersonsToShow(persons.filter(person => person.name.toLowerCase().includes(search)));\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setNewPerson({\n      ...newPerson,\n      [name]: value\n    });\n    //https://medium.com/@bretdoucette/understanding-this-setstate-name-value-a5ef7b4ea2b4\n  };\n\n  const addPerson = e => {\n    //console.log(person, persons)\n    e.preventDefault();\n    const currentPerson = persons.filter(person => person.name === newPerson.name);\n    if (currentPerson.length === 0) {\n      personService.create(newPerson).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setPersonsToShow(persons.concat(returnedPerson));\n        setNotification(`Added ${newPerson.name} to phonebook`);\n        /*    setTimeout(() => {\n             setNotification(null)\n           }, 5000) */\n      }).catch(error => {\n        console.log(error.response.data.error);\n        setNotification(error.response.data.error);\n      });\n    } else {\n      //console.log(person, persons)\n      if (window.confirm(`${newPerson.name} is already added to phonebook, replace the old\n      number with ${newPerson.number}?`)) {\n        personService.update(currentPerson[0].id, newPerson).then(returnedPerson => {\n          const updatedPersons = persons.map(person => person.id !== returnedPerson.id ? person : returnedPerson);\n          setPersons(updatedPersons);\n          setPersonsToShow(updatedPersons);\n          setNotification(`Updated ${newPerson.name}'s number`);\n        }).catch(error => setNotification(error.response.data.error));\n      }\n    }\n    setNewPerson({\n      name: \"\",\n      number: \"\"\n    });\n  };\n  const deletePerson = (id, name) => {\n    /*     let person = persons.find(p => p.id === id)\n        person = person.name */\n    let result = window.confirm(`Delete ${name} ?`);\n    if (result) {\n      console.log(`delete id:${id}`);\n\n      /*  const changedPerson = {...person, } */\n      personService.remove(id).then(response => {\n        const updatedPersons = persons.filter(person => person.id !== id);\n        setPersons(updatedPersons);\n        setPersonsToShow(updatedPersons);\n        setNotification(`Removed ${name} from phonebook`);\n      }).catch(error => {\n        setNotification(`Information of ${name} has already been removed from server`);\n        console.log(error);\n      });\n      /*  .then(response => console.log(response)) */\n    }\n  };\n\n  /* const personsToShow = filteredSearch === ''\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(filteredSearch.toLowerCase())) */\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: notification\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      filteredSearch: filteredSearch,\n      handleFilteredSearch: handleFilteredSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      addPerson: addPerson,\n      newPerson: newPerson,\n      handleChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      personsToShow: personsToShow,\n      deletePerson: deletePerson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"jdPc36+fp2AQBPJLOZy1V4syS/s=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","personService","Filter","PersonForm","Persons","Notification","jsxDEV","_jsxDEV","App","_s","persons","setPersons","newPerson","setNewPerson","name","number","filteredSearch","setFilteredSearch","personsToShow","setPersonsToShow","message","setMessage","getAll","then","initialPersons","timer","setTimeout","clearTimeout","handleFilteredSearch","e","search","target","value","filter","person","toLowerCase","includes","handleChange","addPerson","preventDefault","currentPerson","length","create","returnedPerson","concat","setNotification","catch","error","console","log","response","data","window","confirm","update","id","updatedPersons","map","deletePerson","result","remove","children","fileName","_jsxFileName","lineNumber","columnNumber","notification","_c","$RefreshReg$"],"sources":["C:/Users/coope/OneDrive/Desktop/fullstackopen/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newPerson, setNewPerson] = useState({ name: \"\", number: \"\" })\n  const [filteredSearch, setFilteredSearch] = useState('')\n  const [personsToShow, setPersonsToShow] = useState([]);\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n        setPersonsToShow(initialPersons);\n      })\n  }, [])\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [message]);\n\n\n  const handleFilteredSearch = (e) => {\n    //console.log(e.target.value)\n    const search = e.target.value\n    setFilteredSearch(search)\n    setPersonsToShow(\n      persons.filter((person) => person.name.toLowerCase().includes(search))\n    )\n  }\n\n  const handleChange = (e) => {\n    const { name, value } = e.target\n    setNewPerson({ ...newPerson, [name]: value })\n    //https://medium.com/@bretdoucette/understanding-this-setstate-name-value-a5ef7b4ea2b4\n  }\n\n  const addPerson = (e) => {\n    //console.log(person, persons)\n    e.preventDefault()\n    const currentPerson = persons.filter(\n      (person) => person.name === newPerson.name\n    )\n    if (currentPerson.length === 0) {\n      personService\n        .create(newPerson)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setPersonsToShow(persons.concat(returnedPerson))\n          setNotification(`Added ${newPerson.name} to phonebook`)\n          /*    setTimeout(() => {\n               setNotification(null)\n             }, 5000) */\n        })\n        .catch(error => {\n          console.log(error.response.data.error)\n          setNotification(error.response.data.error)\n        })\n    }\n    else {\n      //console.log(person, persons)\n      if (window.confirm(`${newPerson.name} is already added to phonebook, replace the old\n      number with ${newPerson.number}?`)) {\n        personService\n          .update(currentPerson[0].id, newPerson)\n          .then((returnedPerson) => {\n            const updatedPersons = persons.map((person) => person.id !== returnedPerson.id ? person : returnedPerson)\n            setPersons(updatedPersons)\n            setPersonsToShow(updatedPersons)\n            setNotification(`Updated ${newPerson.name}'s number`);\n          })\n          .catch(error => setNotification(error.response.data.error))\n      }\n    }\n    setNewPerson({ name: \"\", number: \"\" })\n  }\n\n  const deletePerson = (id, name) => {\n    /*     let person = persons.find(p => p.id === id)\n        person = person.name */\n    let result = window.confirm(`Delete ${name} ?`)\n    if (result) {\n      console.log(`delete id:${id}`)\n\n      /*  const changedPerson = {...person, } */\n      personService\n        .remove(id)\n        .then(response => {\n          const updatedPersons = persons.filter(person => person.id !== id)\n          setPersons(updatedPersons)\n          setPersonsToShow(updatedPersons)\n          setNotification(`Removed ${name} from phonebook`)\n        })\n        .catch(error => {\n          setNotification(`Information of ${name} has already been removed from server`)\n          console.log(error)\n        })\n      /*  .then(response => console.log(response)) */\n    }\n\n  }\n\n  /* const personsToShow = filteredSearch === ''\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(filteredSearch.toLowerCase())) */\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} />\n      <Filter filteredSearch={filteredSearch} handleFilteredSearch={handleFilteredSearch} />\n      <PersonForm\n        addPerson={addPerson}\n        newPerson={newPerson}\n        handleChange={handleChange}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        personsToShow={personsToShow}\n        deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,aAAa,MAAM,oBAAoB;AAC9C,OAAOC,MAAM,MAAM,qBAAqB;AACxC,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,OAAO,MAAM,sBAAsB;AAC1C,OAAOC,YAAY,MAAM,2BAA2B;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEpD,MAAMC,GAAG,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC;IAAEe,IAAI,EAAE,EAAE;IAAEC,MAAM,EAAE;EAAG,CAAC,CAAC;EACpE,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACmB,aAAa,EAAEC,gBAAgB,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACqB,OAAO,EAAEC,UAAU,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACdC,aAAa,CACVqB,MAAM,EAAE,CACRC,IAAI,CAACC,cAAc,IAAI;MACtBb,UAAU,CAACa,cAAc,CAAC;MAC1BL,gBAAgB,CAACK,cAAc,CAAC;IAClC,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAENxB,SAAS,CAAC,MAAM;IACd,MAAMyB,KAAK,GAAGC,UAAU,CAAC,MAAM;MAC7BL,UAAU,CAAC,IAAI,CAAC;IAClB,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,MAAM;MACXM,YAAY,CAACF,KAAK,CAAC;IACrB,CAAC;EACH,CAAC,EAAE,CAACL,OAAO,CAAC,CAAC;EAGb,MAAMQ,oBAAoB,GAAIC,CAAC,IAAK;IAClC;IACA,MAAMC,MAAM,GAAGD,CAAC,CAACE,MAAM,CAACC,KAAK;IAC7Bf,iBAAiB,CAACa,MAAM,CAAC;IACzBX,gBAAgB,CACdT,OAAO,CAACuB,MAAM,CAAEC,MAAM,IAAKA,MAAM,CAACpB,IAAI,CAACqB,WAAW,EAAE,CAACC,QAAQ,CAACN,MAAM,CAAC,CAAC,CACvE;EACH,CAAC;EAED,MAAMO,YAAY,GAAIR,CAAC,IAAK;IAC1B,MAAM;MAAEf,IAAI;MAAEkB;IAAM,CAAC,GAAGH,CAAC,CAACE,MAAM;IAChClB,YAAY,CAAC;MAAE,GAAGD,SAAS;MAAE,CAACE,IAAI,GAAGkB;IAAM,CAAC,CAAC;IAC7C;EACF,CAAC;;EAED,MAAMM,SAAS,GAAIT,CAAC,IAAK;IACvB;IACAA,CAAC,CAACU,cAAc,EAAE;IAClB,MAAMC,aAAa,GAAG9B,OAAO,CAACuB,MAAM,CACjCC,MAAM,IAAKA,MAAM,CAACpB,IAAI,KAAKF,SAAS,CAACE,IAAI,CAC3C;IACD,IAAI0B,aAAa,CAACC,MAAM,KAAK,CAAC,EAAE;MAC9BxC,aAAa,CACVyC,MAAM,CAAC9B,SAAS,CAAC,CACjBW,IAAI,CAACoB,cAAc,IAAI;QACtBhC,UAAU,CAACD,OAAO,CAACkC,MAAM,CAACD,cAAc,CAAC,CAAC;QAC1CxB,gBAAgB,CAACT,OAAO,CAACkC,MAAM,CAACD,cAAc,CAAC,CAAC;QAChDE,eAAe,CAAE,SAAQjC,SAAS,CAACE,IAAK,eAAc,CAAC;QACvD;AACV;AACA;MACQ,CAAC,CAAC,CACDgC,KAAK,CAACC,KAAK,IAAI;QACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAACG,QAAQ,CAACC,IAAI,CAACJ,KAAK,CAAC;QACtCF,eAAe,CAACE,KAAK,CAACG,QAAQ,CAACC,IAAI,CAACJ,KAAK,CAAC;MAC5C,CAAC,CAAC;IACN,CAAC,MACI;MACH;MACA,IAAIK,MAAM,CAACC,OAAO,CAAE,GAAEzC,SAAS,CAACE,IAAK;AAC3C,oBAAoBF,SAAS,CAACG,MAAO,GAAE,CAAC,EAAE;QAClCd,aAAa,CACVqD,MAAM,CAACd,aAAa,CAAC,CAAC,CAAC,CAACe,EAAE,EAAE3C,SAAS,CAAC,CACtCW,IAAI,CAAEoB,cAAc,IAAK;UACxB,MAAMa,cAAc,GAAG9C,OAAO,CAAC+C,GAAG,CAAEvB,MAAM,IAAKA,MAAM,CAACqB,EAAE,KAAKZ,cAAc,CAACY,EAAE,GAAGrB,MAAM,GAAGS,cAAc,CAAC;UACzGhC,UAAU,CAAC6C,cAAc,CAAC;UAC1BrC,gBAAgB,CAACqC,cAAc,CAAC;UAChCX,eAAe,CAAE,WAAUjC,SAAS,CAACE,IAAK,WAAU,CAAC;QACvD,CAAC,CAAC,CACDgC,KAAK,CAACC,KAAK,IAAIF,eAAe,CAACE,KAAK,CAACG,QAAQ,CAACC,IAAI,CAACJ,KAAK,CAAC,CAAC;MAC/D;IACF;IACAlC,YAAY,CAAC;MAAEC,IAAI,EAAE,EAAE;MAAEC,MAAM,EAAE;IAAG,CAAC,CAAC;EACxC,CAAC;EAED,MAAM2C,YAAY,GAAGA,CAACH,EAAE,EAAEzC,IAAI,KAAK;IACjC;AACJ;IACI,IAAI6C,MAAM,GAAGP,MAAM,CAACC,OAAO,CAAE,UAASvC,IAAK,IAAG,CAAC;IAC/C,IAAI6C,MAAM,EAAE;MACVX,OAAO,CAACC,GAAG,CAAE,aAAYM,EAAG,EAAC,CAAC;;MAE9B;MACAtD,aAAa,CACV2D,MAAM,CAACL,EAAE,CAAC,CACVhC,IAAI,CAAC2B,QAAQ,IAAI;QAChB,MAAMM,cAAc,GAAG9C,OAAO,CAACuB,MAAM,CAACC,MAAM,IAAIA,MAAM,CAACqB,EAAE,KAAKA,EAAE,CAAC;QACjE5C,UAAU,CAAC6C,cAAc,CAAC;QAC1BrC,gBAAgB,CAACqC,cAAc,CAAC;QAChCX,eAAe,CAAE,WAAU/B,IAAK,iBAAgB,CAAC;MACnD,CAAC,CAAC,CACDgC,KAAK,CAACC,KAAK,IAAI;QACdF,eAAe,CAAE,kBAAiB/B,IAAK,uCAAsC,CAAC;QAC9EkC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB,CAAC,CAAC;MACJ;IACF;EAEF,CAAC;;EAED;AACF;AACA;;EAEE,oBACExC,OAAA;IAAAsD,QAAA,gBACEtD,OAAA;MAAAsD,QAAA,EAAI;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAK,eAClB1D,OAAA,CAACF,YAAY;MAACe,OAAO,EAAE8C;IAAa;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAG,eACvC1D,OAAA,CAACL,MAAM;MAACc,cAAc,EAAEA,cAAe;MAACY,oBAAoB,EAAEA;IAAqB;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAG,eACtF1D,OAAA,CAACJ,UAAU;MACTmC,SAAS,EAAEA,SAAU;MACrB1B,SAAS,EAAEA,SAAU;MACrByB,YAAY,EAAEA;IAAa;MAAAyB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAC3B,eACF1D,OAAA;MAAAsD,QAAA,EAAI;IAAO;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAK,eAChB1D,OAAA,CAACH,OAAO;MACNc,aAAa,EAAEA,aAAc;MAC7BwC,YAAY,EAAEA;IAAa;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAG;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAC5B;AAEV,CAAC;AAAAxD,EAAA,CA9HKD,GAAG;AAAA2D,EAAA,GAAH3D,GAAG;AAgIT,eAAeA,GAAG;AAAA,IAAA2D,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}