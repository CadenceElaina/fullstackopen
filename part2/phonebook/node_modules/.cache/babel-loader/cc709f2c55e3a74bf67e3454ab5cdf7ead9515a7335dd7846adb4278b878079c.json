{"ast":null,"code":"import _defineProperty from\"C:/Users/coope/OneDrive/Desktop/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/coope/OneDrive/Desktop/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/coope/OneDrive/Desktop/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import personService from'./services/persons';import Filter from'./components/Filter';import PersonForm from'./components/PersonForm';import Persons from'./components/Persons';import Notification from'./components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState({name:\"\",number:\"\"}),_useState4=_slicedToArray(_useState3,2),newPerson=_useState4[0],setNewPerson=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),filteredSearch=_useState6[0],setFilteredSearch=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),personsToShow=_useState8[0],setPersonsToShow=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];useEffect(function(){personService.getAll().then(function(initialPersons){setPersons(initialPersons);setPersonsToShow(initialPersons);});},[]);useEffect(function(){var timer=setTimeout(function(){setMessage(null);},5000);return function(){clearTimeout(timer);};},[message]);var handleFilteredSearch=function handleFilteredSearch(e){//console.log(e.target.value)\nvar search=e.target.value;setFilteredSearch(search);setPersonsToShow(persons.filter(function(person){return person.name.toLowerCase().includes(search);}));};var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setNewPerson(_objectSpread(_objectSpread({},newPerson),{},_defineProperty({},name,value)));//https://medium.com/@bretdoucette/understanding-this-setstate-name-value-a5ef7b4ea2b4\n};var addPerson=function addPerson(e){//console.log(person, persons)\ne.preventDefault();var currentPerson=persons.filter(function(person){return person.name===newPerson.name;});if(currentPerson.length===0){personService.create(newPerson).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setPersonsToShow(persons.concat(returnedPerson));setMessage(\"Added \".concat(newPerson.name,\" to phonebook\"));/*    setTimeout(() => {\n               setNotification(null)\n             }, 5000) */}).catch(function(error){console.log(error.response.data.error);setMessage(error.response.data.error);});}else{//console.log(person, persons)\nif(window.confirm(\"\".concat(newPerson.name,\" is already added to phonebook, replace the old\\n      number with \").concat(newPerson.number,\"?\"))){personService.update(currentPerson[0].id,newPerson).then(function(returnedPerson){var updatedPersons=persons.map(function(person){return person.id!==returnedPerson.id?person:returnedPerson;});setPersons(updatedPersons);setPersonsToShow(updatedPersons);setMessage(\"Updated \".concat(newPerson.name,\"'s number\"));}).catch(function(error){return setMessage(error.response.data.error);});}}setNewPerson({name:\"\",number:\"\"});};var deletePerson=function deletePerson(id,name){/*     let person = persons.find(p => p.id === id)\n        person = person.name */var result=window.confirm(\"Delete \".concat(name,\" ?\"));if(result){console.log(\"delete id:\".concat(id));/*  const changedPerson = {...person, } */personService.remove(id).then(function(response){var updatedPersons=persons.filter(function(person){return person.id!==id;});setPersons(updatedPersons);setPersonsToShow(updatedPersons);setMessage(\"Removed \".concat(name,\" from phonebook\"));});/*  .catch(error => {\n         setNotification(`Information of ${name} has already been removed from server`)\n         console.log(error)\n       }) */ /*  .then(response => console.log(response)) */}};/* const personsToShow = filteredSearch === ''\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(filteredSearch.toLowerCase())) */return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:message}),/*#__PURE__*/_jsx(Filter,{filteredSearch:filteredSearch,handleFilteredSearch:handleFilteredSearch}),/*#__PURE__*/_jsx(PersonForm,{addPerson:addPerson,newPerson:newPerson,handleChange:handleChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{personsToShow:personsToShow,deletePerson:deletePerson})]});};export default App;","map":{"version":3,"names":["useState","useEffect","personService","Filter","PersonForm","Persons","Notification","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","persons","setPersons","_useState3","name","number","_useState4","newPerson","setNewPerson","_useState5","_useState6","filteredSearch","setFilteredSearch","_useState7","_useState8","personsToShow","setPersonsToShow","_useState9","_useState10","message","setMessage","getAll","then","initialPersons","timer","setTimeout","clearTimeout","handleFilteredSearch","e","search","target","value","filter","person","toLowerCase","includes","handleChange","_e$target","_objectSpread","_defineProperty","addPerson","preventDefault","currentPerson","length","create","returnedPerson","concat","catch","error","console","log","response","data","window","confirm","update","id","updatedPersons","map","deletePerson","result","remove","children"],"sources":["C:/Users/coope/OneDrive/Desktop/fullstackopen/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newPerson, setNewPerson] = useState({ name: \"\", number: \"\" })\n  const [filteredSearch, setFilteredSearch] = useState('')\n  const [personsToShow, setPersonsToShow] = useState([]);\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n        setPersonsToShow(initialPersons);\n      })\n  }, [])\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [message]);\n\n\n  const handleFilteredSearch = (e) => {\n    //console.log(e.target.value)\n    const search = e.target.value\n    setFilteredSearch(search)\n    setPersonsToShow(\n      persons.filter((person) => person.name.toLowerCase().includes(search))\n    )\n  }\n\n  const handleChange = (e) => {\n    const { name, value } = e.target\n    setNewPerson({ ...newPerson, [name]: value })\n    //https://medium.com/@bretdoucette/understanding-this-setstate-name-value-a5ef7b4ea2b4\n  }\n\n  const addPerson = (e) => {\n    //console.log(person, persons)\n    e.preventDefault()\n    const currentPerson = persons.filter(\n      (person) => person.name === newPerson.name\n    )\n    if (currentPerson.length === 0) {\n      personService\n        .create(newPerson)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setPersonsToShow(persons.concat(returnedPerson))\n          setMessage(`Added ${newPerson.name} to phonebook`)\n          /*    setTimeout(() => {\n               setNotification(null)\n             }, 5000) */\n        })\n        .catch(error => {\n          console.log(error.response.data.error)\n          setMessage(error.response.data.error)\n        })\n    }\n    else {\n      //console.log(person, persons)\n      if (window.confirm(`${newPerson.name} is already added to phonebook, replace the old\n      number with ${newPerson.number}?`)) {\n        personService\n          .update(currentPerson[0].id, newPerson)\n          .then((returnedPerson) => {\n            const updatedPersons = persons.map((person) => person.id !== returnedPerson.id ? person : returnedPerson)\n            setPersons(updatedPersons)\n            setPersonsToShow(updatedPersons)\n            setMessage(`Updated ${newPerson.name}'s number`);\n          })\n          .catch(error => setMessage(error.response.data.error))\n      }\n    }\n    setNewPerson({ name: \"\", number: \"\" })\n  }\n\n  const deletePerson = (id, name) => {\n    /*     let person = persons.find(p => p.id === id)\n        person = person.name */\n    let result = window.confirm(`Delete ${name} ?`)\n    if (result) {\n      console.log(`delete id:${id}`)\n\n      /*  const changedPerson = {...person, } */\n      personService\n        .remove(id)\n        .then(response => {\n          const updatedPersons = persons.filter(person => person.id !== id)\n          setPersons(updatedPersons)\n          setPersonsToShow(updatedPersons)\n          setMessage(`Removed ${name} from phonebook`)\n        })\n      /*  .catch(error => {\n         setNotification(`Information of ${name} has already been removed from server`)\n         console.log(error)\n       }) */\n      /*  .then(response => console.log(response)) */\n    }\n\n  }\n\n  /* const personsToShow = filteredSearch === ''\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(filteredSearch.toLowerCase())) */\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter filteredSearch={filteredSearch} handleFilteredSearch={handleFilteredSearch} />\n      <PersonForm\n        addPerson={addPerson}\n        newPerson={newPerson}\n        handleChange={handleChange}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        personsToShow={personsToShow}\n        deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}