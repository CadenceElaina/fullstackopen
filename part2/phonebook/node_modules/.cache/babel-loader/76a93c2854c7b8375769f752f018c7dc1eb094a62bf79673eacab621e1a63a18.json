{"ast":null,"code":"import _objectSpread from\"C:/Users/coope/OneDrive/Desktop/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/coope/OneDrive/Desktop/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from'axios';import personService from'./services/persons';import Filter from'./components/Filter';import PersonForm from'./components/PersonForm';import Persons from'./components/Persons';import Notification from'./components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),filteredSearch=_useState8[0],setFilteredSearch=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),notification=_useState10[0],setNotification=_useState10[1];useEffect(function(){personService.getAll().then(function(initialPersons){setPersons(initialPersons);});},[]);var handleFilteredSearch=function handleFilteredSearch(e){//console.log(e.target.value)\nsetFilteredSearch(e.target.value);};var handleNameChange=function handleNameChange(e){setNewName(e.target.value);persons.map(function(person){if(person.name.toLowerCase()===e.target.value.toLowerCase()){//console.log(person.name, e.target.value)\n/* return */alert(\"\".concat(person.name,\" is already added to phonebook\"));}});//console.log(newName)\n};var handleNumberChange=function handleNumberChange(e){setNewNumber(e.target.value);persons.map(function(person){if(person.number===e.target.value){//console.log(person.name, e.target.value)\n/* return */alert(\"\".concat(person.number,\" is already added to phonebook\"));}});//console.log(newName)\n};var addPerson=function addPerson(e){e.preventDefault();var personObject={name:newName,number:newNumber,id:newName};var person=persons.find(function(p){return p.id===newName;});if(!person){personService.create(personObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setNotification(\"Added \".concat(returnedPerson.name));setNewName('');setNewNumber('');setTimeout(function(){setNotification(null);},5000);});}else{//console.log(person)\nvar result=window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old\\n      number with \").concat(newNumber,\"?\"));if(result/*  === true */){var changedPerson=_objectSpread(_objectSpread({},person),{},{number:newNumber/* , id: newNumber  */});personService.update(person.id,changedPerson).then(function(changedPerson){var oldNumber=persons.find(function(p){return p.id===person.id;});console.log(oldNumber);setPersons(persons.map(function(p){return p.id!==person.id?p:changedPerson;}));setNotification(\"Changed \".concat(changedPerson.name,\"'s number from \").concat(oldNumber.number,\" to \").concat(newNumber));setTimeout(function(){setNotification(null);},5000);}).catch(function(error){setNotification(\"Information of \".concat(person.name,\" has already been removed from server\"));setTimeout(function(){setNotification(null);},5000);//Update the UI to show that the person you are editing has been removed from the server in another browser\nsetPersons(persons.filter(function(p){return p.id!==person.id;}));console.log(error);});/* .then(changedPerson => {\n          setPersons(persons.map(person => person.id !== person.id ? person : changedPerson))\n        }) */ //console.log(persons.map(p => p.id !== person.id ? p : changedPerson))\n}setNewName('');setNewNumber('');}/*  axios\n       .post('http://localhost:3001/persons', personObject)\n       .then(response => {\n         setPersons(persons.concat(response.data))\n         setNewName('')\n         setNewNumber('')\n       }) */ /*  request.then(response => response.data)\n     setPersons(persons.concat(personObject))\n     setNewName('')\n     setNewNumber('') */};var deletePerson=function deletePerson(id){var person=persons.find(function(p){return p.id===id;});person=person.name;var result=window.confirm(\"Delete \".concat(person,\" ?\"));if(result===true){console.log(\"delete id:\".concat(id));/*  const changedPerson = {...person, } */personService.remove(id).then(function(returnedPerson){setPersons(persons.filter(function(person){return person.id!==id;}));}).catch(function(error){setNotification(\"Information of \".concat(person,\" has already been removed from server\"));console.log(error);});/*  .then(response => console.log(response)) */}};var personsToShow=filteredSearch===''?persons:persons.filter(function(person){return person.name.toLowerCase().includes(filteredSearch.toLowerCase());});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:notification}),/*#__PURE__*/_jsx(Filter,{filteredSearch:filteredSearch,handleFilteredSearch:handleFilteredSearch}),/*#__PURE__*/_jsx(PersonForm,{addPerson:addPerson,newName:newName,handleNameChange:handleNameChange,newNumber:newNumber,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:personsToShow,deletePerson:deletePerson}),\"...\"]});};export default App;","map":{"version":3,"names":["useState","useEffect","axios","personService","Filter","PersonForm","Persons","Notification","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","filteredSearch","setFilteredSearch","_useState9","_useState10","notification","setNotification","getAll","then","initialPersons","handleFilteredSearch","e","target","value","handleNameChange","map","person","name","toLowerCase","alert","concat","handleNumberChange","number","addPerson","preventDefault","personObject","id","find","p","create","returnedPerson","setTimeout","result","window","confirm","changedPerson","_objectSpread","update","oldNumber","console","log","catch","error","filter","deletePerson","remove","personsToShow","includes","children","message"],"sources":["C:/Users/coope/OneDrive/Desktop/fullstackopen/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport axios from 'axios'\n\nimport personService from './services/persons'\n\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filteredSearch, setFilteredSearch] = useState('')\n  const [notification, setNotification] = useState(null)\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const handleFilteredSearch = (e) => {\n    //console.log(e.target.value)\n    setFilteredSearch(e.target.value)\n  }\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value)\n    persons.map((person) => {\n      if (person.name.toLowerCase() === e.target.value.toLowerCase()) {\n        //console.log(person.name, e.target.value)\n        /* return */ alert(`${person.name} is already added to phonebook`)\n      }\n    })\n    //console.log(newName)\n  }\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value)\n    persons.map((person) => {\n      if (person.number === e.target.value) {\n        //console.log(person.name, e.target.value)\n        /* return */ alert(`${person.number} is already added to phonebook`)\n      }\n    })\n    //console.log(newName)\n  }\n  const addPerson = (e) => {\n    e.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber,\n      id: newName,\n    }\n    const person = persons.find(p => p.id === newName)\n    if (!person) {\n\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNotification(`Added ${returnedPerson.name}`)\n          setNewName('')\n          setNewNumber('')\n          setTimeout(() => {\n            setNotification(null)\n          }, 5000)\n        })\n\n    }\n    else {\n      //console.log(person)\n      let result = window.confirm(`${newName} is already added to phonebook, replace the old\n      number with ${newNumber}?`)\n      if (result/*  === true */) {\n        const changedPerson = { ...person, number: newNumber/* , id: newNumber  */ }\n        personService\n          .update(person.id, changedPerson)\n          .then(changedPerson => {\n            const oldNumber = persons.find(p => p.id === person.id)\n            console.log(oldNumber)\n            setPersons(persons.map(p => p.id !== person.id ? p : changedPerson))\n            setNotification(`Changed ${changedPerson.name}'s number from ${oldNumber.number} to ${newNumber}`)\n            setTimeout(() => {\n              setNotification(null)\n            }, 5000)\n          })\n          .catch(error => {\n            setNotification(`Information of ${person.name} has already been removed from server`)\n            setTimeout(() => {\n              setNotification(null)\n            }, 5000)\n            //Update the UI to show that the person you are editing has been removed from the server in another browser\n            setPersons(persons.filter(p => p.id !== person.id))\n            console.log(error)\n          })\n        /* .then(changedPerson => {\n          setPersons(persons.map(person => person.id !== person.id ? person : changedPerson))\n        }) */\n        //console.log(persons.map(p => p.id !== person.id ? p : changedPerson))\n      }\n      setNewName('')\n      setNewNumber('')\n    }\n    /*  axios\n       .post('http://localhost:3001/persons', personObject)\n       .then(response => {\n         setPersons(persons.concat(response.data))\n         setNewName('')\n         setNewNumber('')\n       }) */\n    /*  request.then(response => response.data)\n     setPersons(persons.concat(personObject))\n     setNewName('')\n     setNewNumber('') */\n  }\n\n  const deletePerson = id => {\n    let person = persons.find(p => p.id === id)\n    person = person.name\n    let result = window.confirm(`Delete ${person} ?`)\n    if (result === true) {\n\n\n      console.log(`delete id:${id}`)\n\n      /*  const changedPerson = {...person, } */\n      personService\n        .remove(id)\n        .then(returnedPerson => {\n          setPersons(persons.filter(person => person.id !== id))\n        })\n        .catch(error => {\n          setNotification(`Information of ${person} has already been removed from server`)\n          console.log(error)\n        })\n      /*  .then(response => console.log(response)) */\n    }\n\n  }\n\n  const personsToShow = filteredSearch === ''\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(filteredSearch.toLowerCase()))\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} />\n      <Filter filteredSearch={filteredSearch} handleFilteredSearch={handleFilteredSearch} />\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange} />\n      <h3>Numbers</h3>\n      <Persons\n        persons={personsToShow}\n        deletePerson={deletePerson} />\n\n      ...\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}